language: python
python:
  - "2.7"

cache: 
#  - apt
  - pip

sudo: false

# addons:
#   apt:
#     packages:
#     - texlive-latex-recommended
#     - texlive-latex-extra
#     - texlive-fonts-recommended

install:
  - pip install "Sphinx==1.2.3"
  - pip install "sphinxcontrib-phpdomain"
  - cd cilexer && python setup.py install && cd ..

deploy:
  provider: releases
  api_key: "867d968ccc97ab5133e26ae80c0297f32eb63708"
  file: "./build/html/*"
  skip_cleanup: true
  on:
    tags: true

script:
  - make html

# Flags used here, not in `make html`:
#  -n   Run in nit-picky mode. Currently, this generates warnings for all missing references.
#  -W   Turn warnings into errors. This means that the build stops at the first warning and sphinx-build exits with exit status 1.