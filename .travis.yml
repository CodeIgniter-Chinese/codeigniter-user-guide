language: python
python:
  - "2.7"

env:
  global:
  - GH_REF: github.com/CodeIgniter-Chinese/codeigniter-user-guide.git
  - secure: MH65HgNW1DUUzVc9ZJcV28dvn0Kn5w2kOnqpDC4wu9KvhG9s+GHNAN+l528ycOvQ+p4qG19hAVgM/GOp4w1ziXFq7HROf6SqAfrLx/rWsmFHpck43Z75F2LzGzSTlW+5XYdjG31q1z7xUq4zWW3K5Z9VOdAW0MqxlHpaA9Mmxs32q/cyUo1OVOdd4/fQYavvXqcEi9z6FULQLlJhm2yOP5sGOPY5$

cache: 
#  - apt
  - pip

sudo: false

# addons:
#   apt:
#     packages:
#     - texlive-latex-recommended
#     - texlive-latex-extra
#     - texlive-fonts-recommended

install:
  - pip install "Sphinx==1.2.3"
  - pip install "sphinxcontrib-phpdomain"
  - cd cilexer && python setup.py install && cd ..

script:
  - make html
  - bash ./deploy-gh-pages.sh

# Flags used here, not in `make html`:
#  -n   Run in nit-picky mode. Currently, this generates warnings for all missing references.
#  -W   Turn warnings into errors. This means that the build stops at the first warning and sphinx-build exits with exit status 1.
